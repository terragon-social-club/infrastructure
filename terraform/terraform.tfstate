{
  "version": 4,
  "terraform_version": "0.12.0",
  "serial": 64,
  "lineage": "fcc2f08b-1d42-7c9c-9627-368337cc12d9",
  "outputs": {},
  "resources": [
    {
      "module": "module.Salt_Master",
      "mode": "data",
      "type": "local_file",
      "name": "salt_master_key",
      "provider": "provider.local",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDP2bSaJEKFSRvU8eXnaU+Va9YO0IhrBcUjtWu0I2yvLo8+tMfPDrQf9WQ+95dBr4fehNeTWkOErRg04B2Z1gqOwHo061vnjJ9F6iMJn7OrJnt0c1vD64HpaQVi1ngR3VIiID9Yyf1Fh6+81WOQCFc8ILC72bxrNRCTrKYCfwDgGU0SP6ykccTGb3CzLOz5TcgVAP/Okhfy1sEvWkNf+T8AYcK94kq1OCB8EkMf3MYqbxMd92Xa807lCU+onc1ck4uMB7xHLh10Sv+UHq6YG53QisNkH6hawck4afZtLiMbRLobREKa862Ha9bvzpTQQiCGYa2sU3Ip0QWu646xsMDP root@saltm\n",
            "filename": "modules/salt-master/../../../keys/generated/145946994.pub",
            "id": "d9176c837cbac5ac9daaf64d3340172858224a07"
          },
          "depends_on": [
            "digitalocean_droplet.salt_master"
          ]
        }
      ]
    },
    {
      "module": "module.Jenkins",
      "mode": "data",
      "type": "template_file",
      "name": "grains",
      "provider": "provider.template",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "b8b1e29938c019bb0d5c971e26cac5e9254344f042c2e6369a264d2ad5e2001b",
            "rendered": "roles:\n  - jenkins\n  - minion\nfqdn: jenkins.terragon.us\n",
            "template": "roles:\n${roles}\nfqdn: ${fqdn}\n",
            "vars": {
              "fqdn": "jenkins.terragon.us",
              "roles": "  - jenkins\n  - minion"
            }
          }
        }
      ]
    },
    {
      "module": "module.Salt_Master",
      "mode": "data",
      "type": "template_file",
      "name": "grains",
      "provider": "provider.template",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "de3b5ab6c1e545d47d0a96b438c10155fcac92df8ecc5ca3c17ceace2663814b",
            "rendered": "roles:\n  - master\nfqdn: saltm.terragon.us\n",
            "template": "roles:\n${roles}\nfqdn: ${fqdn}\n",
            "vars": {
              "fqdn": "saltm.terragon.us",
              "roles": "  - master"
            }
          }
        }
      ]
    },
    {
      "module": "module.Salt_Master",
      "mode": "data",
      "type": "template_file",
      "name": "master_config",
      "provider": "provider.template",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "56414f9ca2cdfb21811bfcc9a741b4224e4e805ba4b4d5549aa3af1be5247cf4",
            "rendered": "interface: 134.209.68.6\nfileserver_backend:\n  - git\n  - minion\n  \ngitfs_remotes:\n  - https://github.com/terragon-social-club/infrastructure.git:\n    - mountpoint: salt:///\n      \ngitfs_root: salt\ntransport: zeromq\nfile_recv: True\n\nreactor:\n  - jenkins/build/succeeded:\n    - salt:///files/reactor/jenkins/post-build.sls\n",
            "template": "interface: ${private_ip}\nfileserver_backend:\n  - git\n  - minion\n  \ngitfs_remotes:\n  - https://github.com/terragon-social-club/infrastructure.git:\n    - mountpoint: salt:///\n      \ngitfs_root: salt\ntransport: zeromq\nfile_recv: True\n\nreactor:\n  - jenkins/build/succeeded:\n    - salt:///files/reactor/jenkins/post-build.sls\n",
            "vars": {
              "private_ip": "134.209.68.6"
            }
          },
          "depends_on": [
            "digitalocean_droplet.salt_master"
          ]
        }
      ]
    },
    {
      "module": "module.Salt_Master",
      "mode": "managed",
      "type": "digitalocean_droplet",
      "name": "salt_master",
      "provider": "provider.digitalocean",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "backups": false,
            "disk": 20,
            "id": "145946994",
            "image": "freebsd-12-x64-zfs",
            "ipv4_address": "134.209.68.6",
            "ipv4_address_private": "",
            "ipv6": false,
            "ipv6_address": "",
            "ipv6_address_private": "",
            "locked": false,
            "memory": 512,
            "monitoring": false,
            "name": "saltm",
            "price_hourly": 0.00744,
            "price_monthly": 5,
            "private_networking": false,
            "region": "nyc1",
            "resize_disk": true,
            "size": "512mb",
            "ssh_keys": [
              "2e:05:a5:d1:0f:9e:d8:4e:06:af:20:e7:d4:8b:7b:96"
            ],
            "status": "active",
            "tags": null,
            "urn": "do:droplet:145946994",
            "user_data": null,
            "vcpus": 1,
            "volume_ids": []
          }
        }
      ]
    },
    {
      "module": "module.Jenkins",
      "mode": "managed",
      "type": "digitalocean_droplet",
      "name": "salt_minion",
      "each": "list",
      "provider": "provider.digitalocean",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "backups": false,
            "disk": 20,
            "id": "145947138",
            "image": "freebsd-12-x64-zfs",
            "ipv4_address": "165.22.13.214",
            "ipv4_address_private": "",
            "ipv6": false,
            "ipv6_address": "",
            "ipv6_address_private": "",
            "locked": false,
            "memory": 512,
            "monitoring": false,
            "name": "jenkins",
            "price_hourly": 0.00744,
            "price_monthly": 5,
            "private_networking": false,
            "region": "nyc1",
            "resize_disk": true,
            "size": "512mb",
            "ssh_keys": [
              "2e:05:a5:d1:0f:9e:d8:4e:06:af:20:e7:d4:8b:7b:96",
              "e4:de:66:90:9c:a4:4b:91:89:37:1b:5b:37:d8:4d:ef"
            ],
            "status": "active",
            "tags": null,
            "urn": "do:droplet:145947138",
            "user_data": null,
            "vcpus": 1,
            "volume_ids": []
          },
          "depends_on": [
            "data.template_file.grains"
          ]
        }
      ]
    },
    {
      "module": "module.Salt_Master",
      "mode": "managed",
      "type": "digitalocean_record",
      "name": "salt_master",
      "provider": "provider.digitalocean",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "domain": "terragon.us",
            "flags": 0,
            "fqdn": "saltm.terragon.us",
            "id": "72517429",
            "name": "saltm",
            "port": 0,
            "priority": 0,
            "tag": "",
            "ttl": 1800,
            "type": "A",
            "value": "134.209.68.6",
            "weight": 0
          },
          "depends_on": [
            "digitalocean_droplet.salt_master"
          ]
        }
      ]
    },
    {
      "module": "module.Jenkins",
      "mode": "managed",
      "type": "digitalocean_record",
      "name": "salt_minion",
      "each": "list",
      "provider": "provider.digitalocean",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "domain": "terragon.us",
            "flags": 0,
            "fqdn": "jenkins.terragon.us",
            "id": "72517498",
            "name": "jenkins",
            "port": 0,
            "priority": 0,
            "tag": "",
            "ttl": 1800,
            "type": "A",
            "value": "165.22.13.214",
            "weight": 0
          },
          "depends_on": [
            "digitalocean_droplet.salt_minion[0]"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "digitalocean_ssh_key",
      "name": "mike_keen_key",
      "provider": "provider.digitalocean",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "fingerprint": "2e:05:a5:d1:0f:9e:d8:4e:06:af:20:e7:d4:8b:7b:96",
            "id": "24746301",
            "name": "Mike Keen Key",
            "public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDCCoAzVL4lES4Y7IWt/OuQVc7IIOzcFS40zslLW1hhwAiIgVC2Rt5K3yTYS+WlPj7KTg6Dq+lRVnSxwzXXZlNWVPuMJtNsUVhv5DjUnw+7ASj1ggfAglhtcmaMSyP96kT3w9IqWibwRWW9yxalDOa71cEYu/zVadWIRkH8j6dQkZpK2YojkCyMWHJ4q+BDcgeI96s5Wlw2vFifkPDfTK4vG7cOIlarTsA0gl8sXOf/XO5iuAVYLqvRMgvGsFWhB90NllzJ9gSuo8is59xdQfCzzL0PoZtkwf0LSoGGGfkedQYk8RbR8vshSXEls85jspqRnxczB57YMfyfXOZ43UeB mkeen@membersuite.com"
          }
        }
      ]
    },
    {
      "module": "module.Salt_Master",
      "mode": "managed",
      "type": "digitalocean_ssh_key",
      "name": "salt_master_key",
      "provider": "provider.digitalocean",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "fingerprint": "e4:de:66:90:9c:a4:4b:91:89:37:1b:5b:37:d8:4d:ef",
            "id": "24746304",
            "name": "Salt Master Key 134.209.68.6",
            "public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDP2bSaJEKFSRvU8eXnaU+Va9YO0IhrBcUjtWu0I2yvLo8+tMfPDrQf9WQ+95dBr4fehNeTWkOErRg04B2Z1gqOwHo061vnjJ9F6iMJn7OrJnt0c1vD64HpaQVi1ngR3VIiID9Yyf1Fh6+81WOQCFc8ILC72bxrNRCTrKYCfwDgGU0SP6ykccTGb3CzLOz5TcgVAP/Okhfy1sEvWkNf+T8AYcK94kq1OCB8EkMf3MYqbxMd92Xa807lCU+onc1ck4uMB7xHLh10Sv+UHq6YG53QisNkH6hawck4afZtLiMbRLobREKa862Ha9bvzpTQQiCGYa2sU3Ip0QWu646xsMDP root@saltm"
          },
          "depends_on": [
            "data.local_file.salt_master_key",
            "digitalocean_droplet.salt_master"
          ]
        }
      ]
    },
    {
      "module": "module.Salt_Master",
      "mode": "managed",
      "type": "null_resource",
      "name": "master_install_configure",
      "provider": "provider.null",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "6407670585768925018",
            "triggers": {
              "id": "145946994"
            }
          },
          "depends_on": [
            "data.template_file.grains",
            "data.template_file.master_config",
            "digitalocean_droplet.salt_master",
            "digitalocean_record.salt_master"
          ]
        }
      ]
    }
  ]
}
